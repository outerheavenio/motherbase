---
#- name: gather OS specific variables
#  include_vars: "{{ item }}"
#  with_first_found:
#    - "{{ ansible_os_family }}-{{ ansible_distribution_major_version}}.yml"
#    - "{{ ansible_os_family }}.yml"
- include: install.yml

#- name: Ensure consul service is started, enabled and running
#  service:
#    state: started
#    enabled: yes
#    daemon_reload: true
#    name: motherbase.consul  

#- { include: install-ui.yml, when: consul_is_ui == true }
#- { include: install-cli.yml, when: consul_install_consul_cli == true }
#- { include: dnsmasq.yml, when: consul_install_dnsmasq == true }
#- { include: consulate.yml, when: consul_install_consulate == true }
#- service: >
#    name=consul
#    state="{{ consul_service_state }}"
#    enabled=yes
#  when: consul_manage_service
#- { include: services.yml, when: consul_services is defined and consul_services|length > 0 }
